{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended"
  ],
  "enabledManagers": [
    "github-actions",
    "custom.regex"
  ],
  "packageRules": [
    {
      "description": "GitHub Actions updates",
      "matchManagers": [
        "github-actions"
      ],
      "matchDepTypes": [
        "github-actions"
      ],
      "matchFileNames": [
        ".github/workflows/**"
      ],
      "schedule": [
        "every weekend"
      ],
      "labels": [
        "renovate/github-actions"
      ],
      "groupName": "GitHub Actions updates"
    },
    {
      "description": "Obol core images - ignore unstable/RC versions",
      "matchDatasources": [
        "docker"
      ],
      "ignoreUnstable": true,
      "labels": [
        "renovate/obol-core"
      ],
      "matchPackageNames": [
        "/^obolnetwork/charon/"
      ]
    },
    {
      "description": "Charon chart updates",
      "matchManagers": [
        "custom.regex"
      ],
      "matchFileNames": [
        "charts/charon/**"
      ],
      "labels": [
        "renovate/charon"
      ],
      "groupName": "Charon chart updates",
      "matchPackageNames": [
        "/^obolnetwork/charon/"
      ]
    },
    {
      "description": "Charon-cluster chart updates",
      "matchManagers": [
        "custom.regex"
      ],
      "matchFileNames": [
        "charts/charon-cluster/**"
      ],
      "labels": [
        "renovate/charon-cluster"
      ],
      "groupName": "Charon-cluster chart updates",
      "matchPackageNames": [
        "/^obolnetwork/charon/"
      ]
    },
    {
      "description": "DV-pod chart updates",
      "matchManagers": [
        "custom.regex"
      ],
      "matchFileNames": [
        "charts/dv-pod/**"
      ],
      "labels": [
        "renovate/dv-pod"
      ],
      "groupName": "DV-pod chart updates",
      "matchPackageNames": [
        "/^obolnetwork/charon/"
      ]
    },
    {
      "description": "DV-pod non-charon dependencies (validator clients, infra)",
      "matchManagers": [
        "custom.regex"
      ],
      "matchFileNames": [
        "charts/dv-pod/**"
      ],
      "excludePackageNames": [
        "/^obolnetwork/charon/"
      ],
      "labels": [
        "renovate/dv-pod"
      ],
      "groupName": "DV-pod dependency updates"
    },
    {
      "description": "Charon-relay chart updates",
      "matchManagers": [
        "custom.regex"
      ],
      "matchFileNames": [
        "charts/charon-relay/**"
      ],
      "labels": [
        "renovate/charon-relay"
      ],
      "groupName": "Charon-relay chart updates"
    },
    {
      "description": "Aztec-node chart updates",
      "matchManagers": [
        "custom.regex"
      ],
      "matchFileNames": [
        "charts/aztec-node/**"
      ],
      "labels": [
        "renovate/aztec-node"
      ],
      "groupName": "Aztec-node chart updates"
    },
    {
      "description": "OpenClaw chart updates",
      "matchManagers": [
        "custom.regex"
      ],
      "matchFileNames": [
        "charts/openclaw/**"
      ],
      "labels": [
        "renovate/openclaw"
      ],
      "groupName": "OpenClaw chart updates"
    }
  ],
  "customManagers": [
    {
      "customType": "regex",
      "description": "Update Charon version in charon/values.yaml",
      "managerFilePatterns": [
        "/^charts/charon/values\\.yaml$/"
      ],
      "matchStrings": [
        "repository:\\s*obolnetwork/charon\\n\\s*pullPolicy:\\s*\\w+\\n\\s*tag:\\s*(?<currentValue>v[\\d.]+)"
      ],
      "depNameTemplate": "obolnetwork/charon",
      "datasourceTemplate": "docker",
      "versioningTemplate": "docker"
    },
    {
      "customType": "regex",
      "description": "Update Charon version in charon-cluster/values.yaml",
      "managerFilePatterns": [
        "/^charts/charon-cluster/values\\.yaml$/"
      ],
      "matchStrings": [
        "repository:\\s*obolnetwork/charon\\n\\s*pullPolicy:\\s*\\w+\\n\\s*tag:\\s*(?<currentValue>v[\\d.]+)"
      ],
      "depNameTemplate": "obolnetwork/charon",
      "datasourceTemplate": "docker",
      "versioningTemplate": "docker"
    },
    {
      "customType": "regex",
      "description": "Update Charon version in dv-pod/values.yaml",
      "managerFilePatterns": [
        "/^charts/dv-pod/values\\.yaml$/"
      ],
      "matchStrings": [
        "repository:\\s*obolnetwork/charon\\n\\s*pullPolicy:\\s*\\w+\\n\\s*tag:\\s*(?<currentValue>v[\\d.]+)"
      ],
      "depNameTemplate": "obolnetwork/charon",
      "datasourceTemplate": "docker",
      "versioningTemplate": "docker"
    },
    {
      "customType": "regex",
      "description": "Update appVersion in charon/Chart.yaml",
      "managerFilePatterns": [
        "/^charts/charon/Chart\\.yaml$/"
      ],
      "matchStrings": [
        "appVersion:\\s*\"(?<currentValue>[\\d.]+)\""
      ],
      "depNameTemplate": "obolnetwork/charon",
      "datasourceTemplate": "docker",
      "versioningTemplate": "docker"
    },
    {
      "customType": "regex",
      "description": "Update appVersion in charon-cluster/Chart.yaml",
      "managerFilePatterns": [
        "/^charts/charon-cluster/Chart\\.yaml$/"
      ],
      "matchStrings": [
        "appVersion:\\s*\"(?<currentValue>[\\d.]+)\""
      ],
      "depNameTemplate": "obolnetwork/charon",
      "datasourceTemplate": "docker",
      "versioningTemplate": "docker"
    },
    {
      "customType": "regex",
      "description": "Update appVersion in dv-pod/Chart.yaml",
      "managerFilePatterns": [
        "/^charts/dv-pod/Chart\\.yaml$/"
      ],
      "matchStrings": [
        "appVersion:\\s*\"(?<currentValue>[\\d.]+)\""
      ],
      "depNameTemplate": "obolnetwork/charon",
      "datasourceTemplate": "docker",
      "versioningTemplate": "docker"
    },
    {
      "customType": "regex",
      "description": "Update Charon ENR generation image in values.yaml",
      "managerFilePatterns": [
        "/^charts/dv-pod/values\\.yaml$/"
      ],
      "matchStrings": [
        "generate:\\s+enabled:\\s+\\w+\\s+#[^\\n]*\\s+annotations:[^\\n]*\\s+#[^\\n]*\\s+nodeSelector:[^\\n]*\\s+image:\\s+repository:\\s+\"(?<depName>obolnetwork/charon)\"[^\\n]*\\s+tag:\\s+\"(?<currentValue>v?[0-9]+\\.[0-9]+\\.[0-9]+)\""
      ],
      "datasourceTemplate": "docker",
      "versioningTemplate": "semver"
    },
    {
      "customType": "regex",
      "description": "Update Lighthouse default version in statefulset.yaml",
      "managerFilePatterns": [
        "/^charts/dv-pod/templates/statefulset\\.yaml$/"
      ],
      "matchStrings": [
        "image: \\{\\{ \\.Values\\.validatorClient\\.image\\.repository \\| default \"(?<depName>sigp/lighthouse)\" \\}\\}:\\{\\{ \\.Values\\.validatorClient\\.image\\.tag \\| default \"(?<currentValue>v?[0-9]+\\.[0-9]+\\.[0-9]+)\" \\}\\}"
      ],
      "datasourceTemplate": "docker",
      "versioningTemplate": "semver"
    },
    {
      "customType": "regex",
      "description": "Update Teku default version in statefulset.yaml",
      "managerFilePatterns": [
        "/^charts/dv-pod/templates/statefulset\\.yaml$/"
      ],
      "matchStrings": [
        "image: \\{\\{ \\.Values\\.validatorClient\\.image\\.repository \\| default \"(?<depName>consensys/teku)\" \\}\\}:\\{\\{ \\.Values\\.validatorClient\\.image\\.tag \\| default \"(?<currentValue>[0-9]+\\.[0-9]+\\.[0-9]+)\" \\}\\}"
      ],
      "datasourceTemplate": "docker",
      "versioningTemplate": "semver"
    },
    {
      "customType": "regex",
      "description": "Update Prysm default version in statefulset.yaml",
      "managerFilePatterns": [
        "/^charts/dv-pod/templates/statefulset\\.yaml$/"
      ],
      "matchStrings": [
        "image: \\{\\{ \\.Values\\.validatorClient\\.image\\.repository \\| default \"(?<depName>gcr\\.io/prysmaticlabs/prysm/validator)\" \\}\\}:\\{\\{ \\.Values\\.validatorClient\\.image\\.tag \\| default \"(?<currentValue>v?[0-9]+\\.[0-9]+\\.[0-9]+)\" \\}\\}"
      ],
      "datasourceTemplate": "docker",
      "versioningTemplate": "semver"
    },
    {
      "customType": "regex",
      "description": "Update Nimbus eth2 default version in statefulset.yaml",
      "managerFilePatterns": [
        "/^charts/dv-pod/templates/statefulset\\.yaml$/"
      ],
      "matchStrings": [
        "image: \\{\\{ \\.Values\\.validatorClient\\.image\\.repository \\| default \"(?<depName>statusim/nimbus-eth2)\" \\}\\}:\\{\\{ \\.Values\\.validatorClient\\.image\\.tag \\| default \"(?<currentValue>multiarch-v[0-9]+\\.[0-9]+\\.[0-9]+)\" \\}\\}"
      ],
      "datasourceTemplate": "docker",
      "versioningTemplate": "regex:^multiarch-v(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)$"
    },
    {
      "customType": "regex",
      "description": "Update Nimbus validator-client default version in statefulset.yaml",
      "managerFilePatterns": [
        "/^charts/dv-pod/templates/statefulset\\.yaml$/"
      ],
      "matchStrings": [
        "image: \\{\\{ \\.Values\\.validatorClient\\.image\\.repository \\| default \"(?<depName>statusim/nimbus-validator-client)\" \\}\\}:\\{\\{ \\.Values\\.validatorClient\\.image\\.tag \\| default \"(?<currentValue>multiarch-v[0-9]+\\.[0-9]+\\.[0-9]+)\" \\}\\}"
      ],
      "datasourceTemplate": "docker",
      "versioningTemplate": "regex:^multiarch-v(?<major>\\d+)\\.(?<minor>\\d+)\\.(?<patch>\\d+)$"
    },
    {
      "customType": "regex",
      "description": "Update Lodestar default version in statefulset.yaml",
      "managerFilePatterns": [
        "/^charts/dv-pod/templates/statefulset\\.yaml$/"
      ],
      "matchStrings": [
        "image: \\{\\{ \\.Values\\.validatorClient\\.image\\.repository \\| default \"(?<depName>chainsafe/lodestar)\" \\}\\}:\\{\\{ \\.Values\\.validatorClient\\.image\\.tag \\| default \"(?<currentValue>v?[0-9]+\\.[0-9]+\\.[0-9]+)\" \\}\\}"
      ],
      "datasourceTemplate": "docker",
      "versioningTemplate": "semver"
    },
    {
      "customType": "regex",
      "description": "Update busybox version in statefulset.yaml",
      "managerFilePatterns": [
        "/^charts/dv-pod/templates/statefulset\\.yaml$/"
      ],
      "matchStrings": [
        "image: (?<depName>busybox):(?<currentValue>[0-9]+\\.[0-9]+\\.[0-9]+)"
      ],
      "datasourceTemplate": "docker",
      "versioningTemplate": "semver"
    },
    {
      "customType": "regex",
      "description": "Update Prometheus version in prometheus-deployment.yaml",
      "managerFilePatterns": [
        "/^charts/dv-pod/templates/prometheus-deployment\\.yaml$/"
      ],
      "matchStrings": [
        "image: (?<depName>prom/prometheus):(?<currentValue>v?[0-9]+\\.[0-9]+\\.[0-9]+)"
      ],
      "datasourceTemplate": "docker",
      "versioningTemplate": "semver"
    },
    {
      "customType": "regex",
      "description": "Update Charon version in charon-relay/values.yaml",
      "managerFilePatterns": [
        "/^charts/charon-relay/values\\.yaml$/"
      ],
      "matchStrings": [
        "repository:\\s*obolnetwork/charon\\n\\s*pullPolicy:\\s*\\w+\\n\\s*tag:\\s*(?<currentValue>v[\\d.]+)"
      ],
      "depNameTemplate": "obolnetwork/charon",
      "datasourceTemplate": "docker",
      "versioningTemplate": "docker"
    },
    {
      "customType": "regex",
      "description": "Update appVersion in charon-relay/Chart.yaml",
      "managerFilePatterns": [
        "/^charts/charon-relay/Chart\\.yaml$/"
      ],
      "matchStrings": [
        "appVersion:\\s*\"(?<currentValue>[\\d.]+)\""
      ],
      "depNameTemplate": "obolnetwork/charon",
      "datasourceTemplate": "docker",
      "versioningTemplate": "docker"
    },
    {
      "customType": "regex",
      "description": "Update Aztec image in aztec-node/values.yaml",
      "managerFilePatterns": [
        "/^charts/aztec-node/values\\.yaml$/"
      ],
      "matchStrings": [
        "repository:\\s*aztecprotocol/aztec\\n\\s*#[^\\n]*\\n\\s*tag:\\s*(?<currentValue>[\\d.]+)"
      ],
      "depNameTemplate": "aztecprotocol/aztec",
      "datasourceTemplate": "docker",
      "versioningTemplate": "semver"
    },
    {
      "customType": "regex",
      "description": "Update appVersion in aztec-node/Chart.yaml",
      "managerFilePatterns": [
        "/^charts/aztec-node/Chart\\.yaml$/"
      ],
      "matchStrings": [
        "appVersion:\\s*\"(?<currentValue>[\\d.]+)\""
      ],
      "depNameTemplate": "aztecprotocol/aztec",
      "datasourceTemplate": "docker",
      "versioningTemplate": "semver"
    },
    {
      "customType": "regex",
      "description": "Update OpenClaw image tag in values.yaml",
      "managerFilePatterns": [
        "/^charts/openclaw/values\\.yaml$/"
      ],
      "matchStrings": [
        "# -- OpenClaw image repository, pull policy, and tag version\\s+image:\\s+repository:\\s+(?<depName>ghcr\\.io/obolnetwork/openclaw)\\s+pullPolicy:\\s+\\w+\\s+tag:\\s+\"(?<currentValue>v?[0-9]+\\.[0-9]+\\.[0-9]+)\""
      ],
      "datasourceTemplate": "docker",
      "versioningTemplate": "semver"
    }
  ]
}
